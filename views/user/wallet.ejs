<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Wallet</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white min-h-screen flex flex-col text-gray-900">

  <!-- Navbar -->
  <%- include("../partials/nav") %>

  <!-- Page Container -->
  <div class="flex flex-col md:flex-row gap-6 px-6 md:px-16 py-10">

    <!-- Sidebar -->
    <div class="w-full md:w-64">
      <%- include("../partials/userSidebar") %>
    </div>

    <!-- Wallet Section -->
    <div class="flex-1 bg-white text-gray-900 p-6 rounded-2xl shadow-md border border-gray-200 mt-12">

      <!-- Header -->
      <h2 class="text-2xl font-bold mb-4 text-[#0d6efd]">My Wallet</h2>

      <!-- Current Balance -->
      <div class="bg-gray-100 border border-gray-300 rounded-xl p-4 mb-6 flex justify-between items-center">
        <span class="text-lg font-semibold text-gray-700">Current Balance</span>
        <span class="text-2xl font-bold text-green-600">₹ <%= walletBalance %></span>
      </div>

      <!-- Transaction History -->
      <h3 class="text-xl font-bold mb-3 text-gray-800">Transaction History</h3>

    <div class="overflow-x-auto mt-4">
  <table class="min-w-full border border-gray-400 rounded-xl overflow-hidden text-sm text-gray-800">
    
    <!-- Table Header -->
    <thead class="bg-gray-200 text-gray-900 font-bold border-b border-gray-400">
      <tr class="text-left">
        <th class="py-3 px-4 border-r border-gray-400">Date</th>
        <th class="py-3 px-4 border-r border-gray-400">Type</th>
        <th class="py-3 px-4 border-r border-gray-400">Amount</th>
        <th class="py-3 px-4">Description</th>
      </tr>
    </thead>

    <!-- Table Body -->
    <tbody>
      <% if (transactions && transactions.length > 0) { %>
        <% transactions.forEach(t => { %>
          <tr class="hover:bg-gray-100 transition border-t border-gray-400">
            <td class="py-3 px-4 border-r border-gray-400">
              <%= new Date(t.date).toLocaleString('en-IN', { dateStyle: 'medium', timeStyle: 'short' }) %>
            </td>
            <td class="py-3 px-4 border-r border-gray-400 font-semibold">
              <% if (t.type === 'Credit') { %>
                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold">
                  <%= t.type %>
                </span>
              <% } else { %>
                <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-bold">
                  <%= t.type %>
                </span>
              <% } %>
            </td>
            <td class="py-3 px-4 border-r border-gray-400 font-semibold text-green-600">
              ₹ <%= t.amount.toFixed(2) %>
            </td>
            <td class="py-3 px-4 text-gray-700">
              <%= t.description || "—" %>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="4" class="text-center py-6 text-gray-500 border-t border-gray-400">
            No transactions found
          </td>
        </tr>
      <% } %>
    </tbody>

    <!-- Bottom Border (always visible) -->
    <tfoot>
      <tr>
        <td colspan="4" class="border-t border-gray-400"></td>
      </tr>
    </tfoot>

  </table>
</div>


    </div>
  </div>

  <!-- Footer -->
  <%- include("../partials/footer") %>




  <!-- Pagination -->
<div class="flex justify-center items-center gap-3 mt-6">
  <% if (currentPage > 1) { %>
    <a href="?page=<%= currentPage - 1 %>" 
       class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300">
       ‹ Prev
    </a>
  <% } %>

  <span class="text-gray-700 font-semibold">
    Page <%= currentPage %> of <%= totalPages %>
  </span>

  <% if (currentPage < totalPages) { %>
    <a href="?page=<%= currentPage + 1 %>" 
       class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300">
       Next ›
    </a>
  <% } %>
</div>

</body>
</html>
